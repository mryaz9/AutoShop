from aiogram_dialog import Window
from aiogram_dialog.widgets.kbd import Cancel, Row, Back, Select
from aiogram_dialog.widgets.text import Const, Multi, Format

from dialogs.getters import get_profile, get_order
from dialogs.keyboard import paginated_orders
from dialogs.profile.states import Profile, Purchases
from lexicon.lexicon_ru import LEXICON_MAIN


def profile_window():
    return Window(
        Multi(
            Const("üì± –í–∞—à –ø—Ä–æ—Ñ–∏–ª—å:"),
            Const("‚ûñ‚ûñ‚ûñ‚ûñ‚ûñ‚ûñ‚ûñ‚ûñ‚ûñ‚ûñ‚ûñ‚ûñ‚ûñ"),
            Format("üîë –ú–æ–π ID: {user_id}"),
            Format("Full Name: {full_name}"),
            Format("üë§ –õ–æ–≥–∏–Ω: {username}"),
            Format("üí≥ –ë–∞–ª–∞–Ω—Å: {balance}—Ä—É–±."),
            Format("üïú –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è: {register_time}"),
            sep="\n"
        ),
        Row(
            Cancel(Const(LEXICON_MAIN["exit"])),
        ),
        state=Profile.profile,
        getter=get_profile
    )


def orders_window():
    return Window(
        Const("–ó–∞–∫–∞–∑—ã:"),
        paginated_orders(on_click=None),  # Todo: –î–æ–±–∞–≤–∏—Ç—å –ø–æ–¥–¥–µ—Ä–∂–∫—É –Ω–∞–∂–∞—Ç–∏—è –Ω–∞ –∫–Ω–æ–ø–∫—É
        state=Purchases.purchases,
        getter=get_order
    )
